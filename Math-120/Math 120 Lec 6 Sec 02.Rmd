---
title: "Math 120 Week 4"
author: "Ali Miller"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    toc: true
    toc_depth: 3
    code_folding: hide
    theme: yeti
    df_print: paged
  
  
---

```{r setup, include=FALSE}

#---------- RSTUDIO STARTER V 2.0  --------------#
#                    -Prepared with care by  AM ;D
                
                                                                          
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE, 
                      warning = FALSE)      
library(tidyverse)                
library(ggthemes)                    

theme_set(theme_tufte() +                                     
  theme(text=element_text(family="sans")))  

studentSurvey <- read_csv("Student Data.csv")
deathPenaltyData <- read_csv("death penalty data.csv")
housingData <- read_csv("../Data/House-Sales.csv")

#------------------------------------------------#
```


# Monday Sep 14

## Quiz 











## Effects of outliers on linear regression

Always need to *look* at the scatter plot to check for outliers.  Outliers can have a variety of effects.

- An outlier could make a weak relationship seem strong. (iris examle)
- Or, an outlier could make a strong relationship seem weak (mpg example)
- It might not have much effect at all.

Morals of the story:

- outliers can have all sorts of effects (stronger, weaker, mnot much chang)
- always need to look at scatterplot
- perform analysis both ways: with and without outliers.












## What's an outlier -- IQR Method

Intuition: outliers are "unusual" values in a dataset.

Need an objective tool to decide what values are (and are not) outliers.


IQR Method:  All numbers that are either

- smaller than Q1 - 1.5*IQR or
- bigger than Q3 + 1.5*IQR

are outliers.

**Example:  Exam scores:**

75, 76, 79, 80, 80, 81, 82, 83, 84, 99

We see that Q1 = 79, Q3 = 83, IQR = 4

Compute cutoffs:

Low:
```{r}
79 - 1.5*4
```
Upper:
```{r}
83+1.5*4
```

Since 99 is larger, it's an outlier!

Note, this is an arbitrary (but frequently used) standard.  

Some texts define an "extreme" outlier as one that's 3 IQRS away from Q1, Q2 (as opposed to 1.5).










## What's an outlier - z score method

For a value, the z score ("standard score") is the number of std devs above or below the mean that the value is.

Example:  average height is 64", std dev is 3".  Jill is 70" tall.  What's her zscore?

Her z-score is +2!  She's 2 std devs above the mean.

z = (obs - exp)/stdev
  = (x - xbar)/s_x

Z-scores are a measure of how "unusual" a value is.  Large positive z score means way above the mean!  Large negative z-score means far below the mean.


Sometimes, outliers are defined to be any value with a z-score greater than 3 or less than -3.

We'll always prefer the IQR method, since IQR is robust and stdev isn't.  










# Friday Sep 18

# Z scores and the Empirical Rule

Concept:
z = ( obs - exp)/stdev

Sample:

z = (x - xbar)/s_x

Pop:

z = (x - mu)/sigma


Z scores are useful, because they account for both center and spread!  The tell us how "unusual" values are, relative to the mean and std dev of the data.

For this reason, also called "standard scores".  They give us a "level playing field" to compare data from different distributions.

**Example:  SAT vs ACT**

The average score on ACT is 21, std dev of 4.

The average score on SAT is 580, std dev of 65.

Suppose Beth scored a 27 on the ACT, and Hannah scored 650 on the SAT.  Who scored "better"?

How to compare?  z-scores!

Beth:  z = (27 - 21)/4

```{r}
(27 - 21)/4
```

Beth's score is 1.5 std devs above the average score for ACT.

Hanna:  z = (650 -  580)/65

```{r}
(650 -  580)/65
```

Relative to the pool of test takers, Beth scored "better".


## Empirical Rule (68-95-99.7 Rule)

IF data follows a normal dist (ie bell-shaped, ie unimodal and symmetric), then:

- 68% of the data lies within 1 std dev above or below the mean
  (i.e., 68% of values have a z-score between -1 and +1)
- 95% of the data lies within 2 std dev above or below the mean
  (ie 95% of data has z-score between -2 and 2)
- 99.7% of the data lies within 3 std dev above or below the mean
  (ie 99.7% of data has z-score between -3 and 3)

Important since emprical rule gives intuition about how "common" or "uncommon" data is.

Ex, if a value has a z-score of 1.43, this is quite common.
Ex, if a value has a z-score of 3.2, this is quite uncommon!
Ex, if a value has a z-score of 7.8, this is crazy pants!

Also, empirical rule lets us make predictions about where we expect data to lie.

**Example:  heights**

In the US, men ages 20-29 have mean height of 69" with std dev 2.7".

What percent of men are between 66.3" and 71.7" tall?

Find z-scores:

```{r}
(66.3 - 69)/2.7
```


```{r}
(71.7 - 69)/2.7
```

About 68% of men are in this range of heights.

In this way, we can "slice up" the normal dist into regions by std dev (z-score)


**Example** What percent of men are taller than 74.4"?

Find z-score:

```{r}
(74.4 - 69)/2.7
```

Above z=2, there's a total of 2.35% + 0.15% = 2.5% of the data.  About 2.5% of men are taller than 6'2.4".



## Box plots

Recall, an "outler" is any value that's:

- smaller than Q1 - 1.5*IQR
- bigger than Q3 + 1.5*IQR

IQR = Q3 - Q1


New visualization (picture) for looking at outliers:  box plot.


The "box" shows the IQR:

- the bottom is Q1
- the top is Q3
- the line inside is M

The "whiskers" extend to the largest/smallest values that are NOT OUTLIERS.

IF there are outliers (not always), then each one is represented by a * or dot or something.

Boxlpots are especially useful for **comparing** multiple distributions, or breaking down by category.

**Example:  iris**

```{r}
head(iris)
```

Let's compare the dist for sepal length by species: setosa, versicolor, and virginica.

```{r}
boxplot(iris$Sepal.Length~iris$Species)
```

Setosas have the smallest spread, i.e., setosa sepal lengths tend to be close to the center.  Not as much variation.  

Viriginicas have the largest center, i.e., virginicas tend to have the longest sepal lengths.  

Virginicas also have lots of spread:  they tend to be larger, but sometimes they're small also!

Also, there's an outlier in the virginias.  Ie, an unusually small one.






















































