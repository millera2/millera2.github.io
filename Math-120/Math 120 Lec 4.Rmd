---
title: "Math 120 Week 3"
author: "Ali Miller"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    toc: true
    toc_depth: 3
    code_folding: hide
    theme: yeti
    df_print: paged
  
  
---

```{r setup, include=FALSE}

#---------- RSTUDIO STARTER V 2.0  --------------#
#                    -Prepared with care by  AM ;D
                
                                                                          
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE, 
                      warning = FALSE)      
library(tidyverse)                
library(ggthemes)                    

theme_set(theme_tufte() +                                     
  theme(text=element_text(family="sans")))  

studentSurvey <- read_csv("Student Data.csv")
deathPenaltyData <- read_csv("death penalty data.csv")

#------------------------------------------------#
```


# Week 4

## Monday Sept 7

#### Warm-up example

Suppose we wish to predict cty fuel efficiency based upon engine size (displ).  We find the following summary stats:

I.e.: displ is x and cty is y.

```{r}
mpg %>% ggplot(aes(displ, cty))+geom_point()
```


Mean displacement: 3.472 L   xbar
Mean cty mpg: 16.859 mpg     ybar
Stdev displacement: 1.292 L  s_x
Stddev cty mpg: 4.256 mpg    s_y
correlation coeff = -0.799   r


1) Find the equation of the least squres line.

slope = b_1 = r*s_y/s_x = -2.632

Next, intercept:  

yint = b_0 = ybar - b_1*xbar 25.997

Thus, the equation:  

yhat = 25.997 - 2.632x

2)  A new car has an engine size of 2.1 L and city fuel efficiency of 27mpg.

What would our linear model (the least squares line) predict this car's city mpg?  What's the residual for this measurement?

Prediction:  plug in x=2.1

```{r}
25.997 - 2.632*2.1
```

Predict the cty mpg to be 20.496mpg.

Residual:  obs y-value - expected (prediction).  
```{r}
27 - 20.470
```

Our model under-approximated the cty mpg by 6.53mpg.

## Interpreting slope and intercept

slope = how steep the line is.  Specifically: the slope is how much we epect the y-variable to change in response to a 1-unit change in x.


Our slope for predicting mpg based on displ: -2.632.  This means that for each additional liter of engine size, we expect the cty fuel effiency to decrease by 2.632L. 

yint = y-val when x=0.  Here, if the x variable measures 0 units, we predict the y variable to be the y-int.  

In our car model, interpret:  if a car has an engine size of zero, we expect cty fuel efficienty to be 25.997mpg.

Weird!  Car couldn't have engine size of 0L.  In our data, ranged from about 2 to 7.  This is **extrapolation**, i.e. making a prediction based on an x value that's well outside the range of observations.  This is bad!  

Junk in, junk out!  There's no reason to expect that the pattern continues outside the range of observations.








### Analyzing residuals.

Remember, residuals are errors.  So, understanding them is important in understanding how "good" the model.

To see them, we use a visual.  **Residual plot**!  Its a scatter plot:

x: original x data
y: residuals (error)

Example: plot residuals for our mpg model (x=displ, y=cty)

```{r}
myModel <- lm(mpg$cty~mpg$displ)

qplot(mpg$displ, myModel$residuals)
```








#### Coefficient of determination
